{% extends 'base.html' %}

{% load static %}

{% block title %} Post {% endblock %}

{% block content %}
    <h1>Social Feed</h1>

    <form class='post_form' method='POST' action='/feed/create_post/'>
        {% csrf_token %}
        {{ postform }}
        <input type='submit' value='Create Post' class='post_form'>
    </form>

    <h4>Posts</h4>

    {% for post in post_list %}
        {% if post.user_profile_fk.user.id == user.id %}
            <a href="{% url 'feed:comment' post.id %}">{{ post.text }}</a>
            <a href="{% url 'user:profile' post.user_profile_fk.user.id %}">@{{ post.user_profile_fk.user.username }}</a>
            <p>{{ post.date_last_updated }}</p>
            <a href="{% url 'user:profile' post.user_profile_fk.user.id %}">
                {% if post.user_profile_fk.profilepic %}
                    <img src="{{ post.user_profile_fk.profilepic.url }}" width="80" height="80" class="d-inline-block align-top">
                {% else %}
                    <img src="{% static 'images/noprofilepic.jpg' type='image/jpg' %}" width="80" height="80" class="d-inline-block align-top" alt="...">
                {% endif %}
            </a>
        {% else %}
            <a href="{% url 'feed:comment' post.id %}">{{ post.text }}</a>
            <a href="{% url 'user:other_profile' post.user_profile_fk.user.id %}">@{{ post.user_profile_fk.user.username }}</a>
            <p>{{ post.date_last_updated }}</p>
            <a href="{% url 'user:other_profile' post.user_profile_fk.user.id %}">
                {% if post.user_profile_fk.profilepic %}
                    <img src="{{ post.user_profile_fk.profilepic.url }}" width="80" height="80" class="d-inline-block align-top">
                {% else %}
                    <img src="{% static 'images/noprofilepic.jpg' type='image/jpg' %}" width="80" height="80" class="d-inline-block align-top" alt="...">
                {% endif %}
            </a>
        {% endif %}
    {% endfor %}

{% endblock %}